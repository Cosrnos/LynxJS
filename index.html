
<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>LynxJS - HTML5 Canvas Game Engine Developer Console</title>
		<link href='http://fonts.googleapis.com/css?family=Press+Start+2P' rel='stylesheet' type='text/css'>
		<style>
			html,body{
				width: 100%;
				height: 100%;
				margin: 0px;
				padding: 0px;
			}

			body{
				background: #2A3338;
				color: #eeeeee;
				font-family: Helvetica, Arial, Sans-serif;
			}

			header{
				text-align: center;
				min-width: 1000px;
				margin: 00 auto;
				padding-top: 10px;
			}
			a {
				color: #eeeeee;
			}
			#logo{
				text-decoration: none;
				font-size: 40px;
				font-family: 'Press Start 2P',Helvetica,Arial,Sans-serif;
			}

			nav {
				border: 0px;
				border-top: 8px solid #df8349;
				border-bottom: 8px solid #df8349;
				padding: 5px;
				width: 806px;
				margin: 00 auto;
				clear: both;
				overflow: auto;
				text-transform: uppercase;
			}

			nav a{
				text-decoration: none;
				font-size: 20px;
				font-weight: 500;
				letter-spacing: 2px;
				padding: 5px 10px 5px 10px;
			}

			nav a:hover{
				color: #df8349;
			}

			h2{
				font-size: 26px;
				letter-spacing: 2px;
				width: 800px;
				text-align: center;
				border: 8px solid #df8349;
				border-top: 0px;
				border-bottom: 0px;
				margin: 00 auto;
			}

			#content a{
				color: #00bff3;
				text-decoration: none;
			}

			#viewport-container{
				background: #000;
				height: 450px;
				width: 800px;
				margin: 00 auto;
				border: 8px solid #df8349;
			}

			#console-container{
				background: #121212;
				color: #fff;
				height: 200px;
				width: 800px;
				margin: 00 auto;
				border: 8px solid #df8349;				
				overflow-y: scroll;
				overflow-x: hidden;
				position: relative;
			}

			#console{
				position: absolute;
				bottom: 5px;
				left: 0;
			}

			#console span{
				display: block;
				margin: 0px;
				padding: 0px;
				position: relative;
				bottom: 0;
				left: 0;
				font-size: 14px;
				font-family: Consolas, "Courier New", Courier, monospace;
			}
		</style>
		<script src="src/Lynx.js">
		</script>
		<script type="text/javascript">
			var size = 5;
			var limit = 100;
			var total = 0;

			var Viewport = {};

			window.addEventListener("load",function load(event){
				Lynx.LogTarget = "console";
				Lynx.Load(function(){
					
					Lynx.CM.On("ComponentManager.Register",function(pComponent){
						if(pComponent.Name == "SampleComponent")
							pComponent.HelloWorld();
					});

					Lynx.CM.Load("SampleComponent");
					Lynx.CM.Load("MouseEvents");

					Viewport = new Lynx.C("viewport","viewport-container",800,450);

					Viewport.On("MouseEvents.Down", function(pSender){
						var vptPos = this.ParseMousePosition(pSender.X, pSender.Y);
						addObject(vptPos.X, vptPos.Y);
					});


					Lynx.Start();
				});
			}, false);

			var updateElement = function(pSender){
				this.X += this.vx * Lynx.Animator.Delta / 200;
				this.Y += this.vy * Lynx.Animator.Delta / 200;
			
				if(this.X+this.Width > Viewport.Width + size)
				{
					this.X = 0;
				}

				if(this.X < -size)
				{
					this.X = Viewport.Width-this.Width;
				}

				if(this.Y+this.Height > Viewport.Height + size)
				{
					this.Y = 0;
				}

				return true;
			}

			var addObject = function(pX, pY)
			{
				if(total++ > limit)
					return;

				pX = pX || Math.floor(Math.random() * Viewport.Width);
				pY = pY || -size;

				var ce = Lynx.CE(pX, pY,size, size, "square");
				
				ce.vx = Math.floor(Math.random()* 2) + 1;
				var left = Math.floor(Math.random() * 2) + 1;
				ce.vx = (left === 1) ? -1 * ce.vx : ce.vx;
				ce.vy = Math.floor(Math.random()*6) + 3;

				ce.On("Update", updateElement);
				Viewport.AddElement(ce);
			}
		</script>
	</head>
	<body>
		<header>
			<a href="/" id="logo">LynxJS</a>
		</header>
		<h2 style="border-top: 8px solid #df8349; border-radius: 15px 15px 0px 0px;">Viewport</h2>
		<div id="viewport-container" width="800" height="450">
		</div>
		<h2>Console</h2>
		<div id="console-container" width="600" height="300">
			<div id="console">
			</div>
		</div>
		<footer>
		</footer>
	</body>
</html>
